<!DOCTYPE html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
--><html lang="en" class="no-js">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- overrides: https://github.com/mmistakes/minimal-mistakes/blob/master/_includes/head.html -->

<meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Reading and writing JSON - libGDX</title>
<meta name="description" content="libGDX is a cross-platform Java game development framework based on OpenGL (ES) that works on Windows, Linux, macOS, Android, your browser and iOS.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="libGDX">
<meta property="og:title" content="Reading and writing JSON">
<meta property="og:url" content="https://crykn.github.io/pages/crykn/wiki/reading-and-writing-json">


  <meta property="og:description" content="libGDX is a cross-platform Java game development framework based on OpenGL (ES) that works on Windows, Linux, macOS, Android, your browser and iOS.">



  <meta property="og:image" content="https://crykn.github.io/pages/crykn/assets/images/logo.png">










<link rel="canonical" href="https://crykn.github.io/pages/crykn/wiki/reading-and-writing-json">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://crykn.github.io/pages/crykn/"
    
  }
</script>


  <meta name="google-site-verification" content="qc0iys9Aweas1z8EhICO-0Ohwh6Iq1GDV6K75e0ToO8">






<!-- end _includes/seo.html -->



  <link href="/pages/crykn/feed.xml" type="application/atom+xml" rel="alternate" title="libGDX Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- Light mode -->
<link rel="stylesheet" href="/pages/crykn/assets/css/main.css">

<!-- Dark mode -->

  <meta name="color-scheme" content="light dark">
  <style>
    @import url("/pages/crykn/assets/css/main2.css") (prefers-color-scheme: dark);
  </style>


<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>




    <!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
<link rel="manifest" href="/assets/icons/site.webmanifest">
<link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/icons/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" href="/assets/css/wiki.css">
  </head>

  <body class="layout--wiki">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <!-- overrides: _includes/masthead.html -->




<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/pages/crykn/">
            <picture>
              
                <!-- dark mode logo -->
                <source srcset="/pages/crykn/assets/brand/logo_dark.svg" media="(prefers-color-scheme: dark)">
              
              <img src="/pages/crykn/assets/brand/logo.svg" alt=" ">
            </source></picture>
          </a>
        
        <a class="site-title" href="/pages/crykn/">
           
          
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/pages/crykn/">Back to Main Site</a>
            </li>
<li class="masthead__menu-item">
              <a href="/pages/crykn/wiki/">Wiki Home</a>
            </li>
</ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">

      <div id="main" role="main">
  <header>
    <h1 id="page-title" class="page__title" itemprop="headline">Reading and writing JSON
</h1>

    <div class="header-meta">
      Last edited on 17 November 2021 • <a href="https://github.com/crykn/crykn.github.io/commits/dev/" rel="external">View revision history<span class="ico-ext"><i class="fas fa-external-link-alt"></i></span></a> • <a href="https://github.com/crykn/crykn.github.io/edit/dev/_wiki/reading-and-writing-json.md" rel="external">Edit on GitHub<span class="ico-ext"><i class="fas fa-external-link-alt"></i></span></a>
    </div>
  </header>
  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <div class="page__inner-wrap">
      <section class="page__content e-content markdown-body" itemprop="text">
          <aside class="sidebar__right">
            <nav class="toc">
              <div class="toc__menu">
                
                <h1 id="table-of-contents">Table of Contents</h1>
<p><a href="/wiki/wiki-style-guide">Wiki Style Guide</a></p>

<h2 id="getting-started">Getting Started</h2>
<ul>
  <li><a href="/wiki/setup">Setting Up a Dev Environment</a></li>
  <li><a href="/wiki/project-generation">Creating Your First libGDX Project</a></li>
  <li><a href="/wiki/import-and-running">Importing &amp; Running It</a></li>
  <li><a href="/wiki/a-simple-game">A Simple Game</a></li>
  <li><a href="/wiki/simple-game-extended">Extending the Simple Game</a></li>
</ul>

<h2 id="developers-guide">Developer’s Guide</h2>
<details><summary>The Application Framework</summary>

<div>
    <ul>
      <li><a href="/wiki/the-application-framework">The Application Framework</a></li>
      <li><a href="/wiki/the-life-cycle">The Life-Cycle</a></li>
      <li><a href="/wiki/modules-overview">Modules Overview</a></li>
      <li><a href="/wiki/starter-classes-and-configuration">Starter Classes and Configuration</a></li>
      <li><a href="/wiki/querying">Querying</a></li>
      <li><a href="/wiki/logging">Logging</a></li>
      <li><a href="/wiki/threading">Threading</a></li>
      <li><a href="/wiki/interfacing-with-platform-specific-code">Interfacing With Platform-Specific Code</a></li>
    </ul>
  </div>

</details>

<p><a href="/wiki/file-handling">File Handling</a></p>

<p><a href="/wiki/networking">Networking</a></p>

<p><a href="/wiki/preferences">Preferences</a></p>

<details><summary>Input Handling</summary>

<div>
    <ul>
      <li><a href="/wiki/input-handling">Input Handling</a></li>
      <li><a href="/wiki/configuration-and-querying">Configuration and Querying</a></li>
      <li>
<a href="/wiki/mouse,-touch-and-keyboard">Mouse, Touch and Keyboard</a>
        <ul>
          <li><a href="/wiki/polling">Polling</a></li>
          <li><a href="/wiki/event-handling">Event Handling</a></li>
        </ul>
      </li>
      <li><a href="/wiki/controllers">Controllers</a></li>
      <li><a href="/wiki/gesture-detection">Gesture Detection</a></li>
      <li><a href="/wiki/simple-text-input">Simple Text Input</a></li>
      <li><a href="/wiki/accelerometer">Accelerometer</a></li>
      <li><a href="/wiki/compass">Compass</a></li>
      <li><a href="/wiki/gyroscope">Gyroscope</a></li>
      <li><a href="/wiki/vibrator">Vibrator</a></li>
      <li><a href="/wiki/cursor-visibility-and-catching">Cursor Visibility and Catching</a></li>
      <li><a href="/wiki/back-and-menu-key-catching">Back and Menu Key Catching</a></li>
      <li><a href="/wiki/on-screen-keyboard">On-Screen Keyboard</a></li>
      <li><a href="/wiki/adding-new-keycodes">Adding new Keycodes</a></li>
    </ul>
  </div>

</details>

<p><a href="/wiki/memory-management">Memory Management</a></p>

<details><summary>Audio</summary>

<div>
    <ul>
      <li><a href="/wiki/audio">Audio</a></li>
      <li><a href="/wiki/sound-effects">Sound Effects</a></li>
      <li><a href="/wiki/streaming-music">Streaming Music</a></li>
      <li><a href="/wiki/playing-pcm-audio">Playing PCM Audio</a></li>
      <li><a href="/wiki/recording-pcm-audio">Recording PCM Audio</a></li>
    </ul>
  </div>

</details>

<details><summary>Graphics</summary>

<div>
    <ul>
      <li><a href="/wiki/graphics">Graphics</a></li>
      <li><a href="/wiki/querying-and-configuring-graphics-(monitors,-display-modes,-vsync,-display-cutouts)">Querying and configuring graphics (monitors, display modes, vsync, display cutouts)</a></li>
      <li><a href="/wiki/continuous-and-non-continuous-rendering">Continuous and Non-Continuous Rendering</a></li>
      <li><a href="/wiki/clearing-the-screen">Clearing the Screen</a></li>
      <li><a href="/wiki/taking-a-screenshot">Taking a Screenshot</a></li>
      <li><a href="/wiki/profiling">Profiling</a></li>
      <li><a href="/wiki/viewports">Viewports</a></li>
      <li>
<a href="/wiki/opengl-(es)-support">OpenGL (ES) Support</a>
        <ul>
          <li>Configuration and Querying OpenGL ??</li>
          <li>Direct Access ??</li>
          <li>Utility Classes<br>
 -<a href="/wiki/rendering-shapes">Rendering Shapes</a><br>
 -<a href="/wiki/textures-and-textureregions">Textures and TextureRegions</a><br>
 -<a href="/wiki/meshes">Meshes</a><br>
 -<a href="/wiki/shaders">Shaders</a><br>
 -<a href="/wiki/frame-buffer-objects">Frame Buffer Objects</a>
</li>
        </ul>
      </li>
    </ul>

    <p>    <strong>2D Graphics</strong></p>
    <ul>
      <li><a href="/wiki/spritebatch,-textureregions,-and-sprites">SpriteBatch, TextureRegions, and Sprites</a></li>
      <li><a href="/wiki/2d-animation">2D Animation</a></li>
      <li><a href="/wiki/clipping,-with-the-use-of-scissorstack">Clipping, With the Use of ScissorStack</a></li>
      <li><a href="/wiki/masking">Masking</a></li>
      <li><a href="/wiki/orthographic-camera">Orthographic Camera</a></li>
      <li>Mapping Touch Coordinates ??</li>
      <li><a href="/wiki/ninepatches">NinePatches</a></li>
      <li>
<a href="/wiki/bitmap-fonts">Bitmap Fonts</a>
        <ul>
          <li><a href="/wiki/distance-field-fonts">Distance Field Fonts</a></li>
          <li><a href="/wiki/color-markup-language">Color Markup Language</a></li>
        </ul>
      </li>
      <li><a href="/wiki/using-textureatlases">Using TextureAtlases</a></li>
      <li><a href="/wiki/pixmaps">Pixmaps</a></li>
      <li><a href="/wiki/packing-atlases-offline">Packing Atlases Offline</a></li>
      <li><a href="/wiki/packing-atlases-at-runtime">Packing Atlases at Runtime</a></li>
      <li><a href="/wiki/texture-compression">Texture Compression</a></li>
      <li><a href="/wiki/2d-particleeffects">2D ParticleEffects</a></li>
      <li><a href="/wiki/tile-maps">Tile Maps</a></li>
      <li><a href="/wiki/scene2d">scene2d</a></li>
      <li>
<a href="/wiki/scene2d.ui">scene2d.ui</a>
        <ul>
          <li><a href="/wiki/table">Table</a></li>
          <li><a href="/wiki/skin">Skin</a></li>
        </ul>
      </li>
      <li><a href="/wiki/imgui">ImGui</a></li>
    </ul>

    <p>    <strong><a href="/wiki/3d-graphics">3D Graphics</a></strong></p>

    <ul>
      <li><a href="/wiki/quick-start">Quick Start</a></li>
      <li><a href="/wiki/models">Models</a></li>
      <li><a href="/wiki/material-and-environment">Material and Environment</a></li>
      <li><a href="/wiki/modelbatch">ModelBatch</a></li>
      <li><a href="/wiki/modelcache">ModelCache</a></li>
      <li><a href="/wiki/modelbuilder,-meshbuilder-and-meshpartbuilder">ModelBuilder, MeshBuilder and MeshPartBuilder</a></li>
      <li><a href="/wiki/3d-animations-and-skinning">3D Animations and Skinning</a></li>
      <li><a href="/wiki/importing-blender-models-in-libgdx">Importing Blender Models in libGDX</a></li>
      <li><a href="/wiki/3d-particle-effects">3D Particle Effects</a></li>
      <li><a href="/wiki/virtual-reality-(vr)">Virtual Reality (VR)</a></li>
      <li><a href="/wiki/3d-picking">3D Picking</a></li>
      <li>Perspective Camera ??</li>
    </ul>
  </div>

</details>

<p><a href="/wiki/managing-your-assets">Managing Your Assets</a></p>

<p><a href="/wiki/html5-backend-and-gwt-specifics">HTML5 Backend and GWT Specifics</a></p>

<p><a href="/wiki/internationalization-and-localization">Internationalization and Localization</a></p>

<details><summary>Utilities</summary>

<div>
    <ul>
      <li><a href="/wiki/reading-and-writing-json">Reading and Writing JSON</a></li>
      <li><a href="/wiki/reading-and-writing-xml">Reading and Writing XML</a></li>
      <li><a href="/wiki/collections">Collections</a></li>
      <li><a href="/wiki/reflection">Reflection</a></li>
      <li><a href="/wiki/jnigen">jnigen</a></li>
    </ul>
  </div>

</details>

<details><summary>Math Utilities</summary>

<div>
    <ul>
      <li><a href="/wiki/math-utilities">Math Utilities</a></li>
      <li><a href="/wiki/interpolation">Interpolation</a></li>
      <li><a href="/wiki/vectors,-matrices,-quaternions">Vectors, Matrices, Quaternions</a></li>
      <li><a href="/wiki/circles,-planes,-rays,-etc.">Circles, Planes, Rays, etc.</a></li>
      <li><a href="/wiki/path-interface-and-splines">Path Interface and Splines</a></li>
      <li>Bounding Volumes ??</li>
      <li>Intersection and Overlap Testing ??</li>
    </ul>
  </div>

</details>

<details><summary>Tools</summary>

<div>
    <ul>
      <li><a href="/wiki/texture-packer">Texture Packer</a></li>
      <li><a href="/wiki/hiero">Hiero</a></li>
      <li><a href="/wiki/2d-particle-editor">2D Particle Editor</a></li>
      <li><a href="/wiki/skin-composer">Skin Composer</a></li>
      <li><a href="/wiki/overlap2d">Overlap2D</a></li>
    </ul>
  </div>

</details>

<details><summary>Extensions</summary>

<div>
    <ul>
      <li><a href="/wiki/artificial-intelligence">Artificial Intelligence</a></li>
      <li><a href="/wiki/gdx-freetype">gdx-freetype</a></li>
      <li>
<a href="/wiki/gdx-pay">gdx-pay</a>: cross-platform In-App-Purchasing API</li>
      <li>
<a href="/wiki/physics">Physics</a>
        <ul>
          <li><a href="/wiki/box2d">Box2D</a></li>
          <li>
<a href="/wiki/bullet-physics">Bullet Physics</a><br>
 -<a href="/wiki/bullet-wrapper-setup">Setup</a><br>
 -<a href="/wiki/bullet-wrapper-using-the-wrapper">Using the Wrapper</a><br>
 -<a href="/wiki/bullet-wrapper-using-models">Using Models</a><br>
 -<a href="/wiki/bullet-wrapper-contact-callbacks">Contact Callbacks</a><br>
 -<a href="/wiki/bullet-wrapper-custom-classes">Custom Classes</a><br>
 -<a href="/wiki/bullet-wrapper-debugging">Debugging</a>
</li>
        </ul>
      </li>
      <li><a href="/wiki/third-party-extension-support">Publishing Your Own Extensions</a></li>
    </ul>
  </div>

</details>

<details><summary>Using libGDX With Other JVM Languages</summary>

<div>
    <ul>
      <li><a href="/wiki/using-libgdx-with-other-jvm-languages">Using libGDX With Other JVM Languages</a></li>
      <li><a href="/wiki/using-libgdx-with-clojure">Using libGDX With Clojure</a></li>
      <li><a href="/wiki/using-libgdx-with-kotlin">Using libGDX With Kotlin</a></li>
      <li><a href="/wiki/using-libgdx-with-python">Using libGDX With Python</a></li>
      <li><a href="/wiki/using-libgdx-with-scala">Using libGDX With Scala</a></li>
    </ul>
  </div>

</details>

<details><summary>Third Party Services</summary>

<div>
    <ul>
      <li><a href="/wiki/admob-in-libgdx">AdMob in libGDX</a></li>
      <li><a href="/wiki/airpush-in-libgdx">Airpush in libGDX</a></li>
      <li><a href="/wiki/firebase-in-libgdx">Firebase in libGDX</a></li>
      <li><a href="/wiki/smaato-in-libgdx">Smaato in libGDX</a></li>
      <li><a href="/wiki/google-play-games-services-in-libgdx">Google Play Games Services in libGDX</a></li>
      <li><a href="/wiki/pollfish-in-libgdx">Pollfish in libGDX</a></li>
      <li><a href="/wiki/proguard/dexguard-and-libgdx">ProGuard/DexGuard and libGDX</a></li>
    </ul>
  </div>

</details>

<h2 id="articles">Articles</h2>
<ul>
  <li><a href="/wiki/getting-help">Getting Help</a></li>
  <li><a href="/wiki/external-tutorials">External Tutorials</a></li>
  <li><a href="/wiki/java-development-kit---selection">Java Development Kit - Selection</a></li>
  <li><a href="/wiki/deploying-your-application">Deploying your application</a></li>
  <li><a href="/wiki/coordinate-systems">Coordinate systems</a></li>
  <li><a href="/wiki/updating-libgdx">Updating Your libGDX Version</a></li>
  <li><a href="/wiki/dependency-management-with-gradle">Adding Extensions and 3rd Party Libraries</a></li>
  <li><a href="/wiki/improving-workflow-with-gradle">Improving Your Gradle Workflow</a></li>
  <li><a href="/wiki/creating-a-separate-assets-project-in-eclipse">Creating Asset Project in Eclipse</a></li>
</ul>

              </div>
            </nav>
          </aside>

        <ul>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#writing-object-graphs">Writing Object Graphs</a></li>
  <li><a href="#reading-object-graphs">Reading Object Graphs</a></li>
  <li><a href="#customizing-serialization">Customizing Serialization</a></li>
  <li><a href="#serialization-methods">Serialization Methods</a></li>
  <li><a href="#event-based-parsing">Event Based Parsing</a></li>
  <li><a href="#supported-classes">Supported Classes</a></li>
</ul>

<h2 id="overview">
<a id="overview"></a>Overview</h2>

<p>libGDX can perform automatic object to JSON serialization and JSON to object deserialization. Four small classes make up the API:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">JsonWriter</code>: A builder style API for emitting JSON.</li>
  <li>
<code class="language-plaintext highlighter-rouge">JsonReader</code>: Parses JSON and builds a DOM of <code class="language-plaintext highlighter-rouge">JsonValue</code> objects.</li>
  <li>
<code class="language-plaintext highlighter-rouge">JsonValue</code>: Describes a JSON object, array, string, float, long, boolean, or null.</li>
  <li>
<code class="language-plaintext highlighter-rouge">Json</code>: Reads and writes arbitrary object graphs using <code class="language-plaintext highlighter-rouge">JsonReader</code> and <code class="language-plaintext highlighter-rouge">JsonWriter</code>.</li>
</ul>

<p>To use these classes outside of libgdx, see the <a href="https://github.com/EsotericSoftware/jsonbeans/" rel="external">JsonBeans<span class="ico-ext"><i class="fas fa-external-link-alt"></i></span></a> project.</p>

<h2 id="writing-object-graphs">
<a id="writing-object-graphs"></a>Writing Object Graphs</h2>

<p>The <code class="language-plaintext highlighter-rouge">Json</code> class uses reflection to automatically serialize objects to JSON. For example, here are two classes (getters/setters and constructors omitted):</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
   <span class="kd">private</span> <span class="nc">ArrayList</span> <span class="n">numbers</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PhoneNumber</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
   <span class="kd">private</span> <span class="nc">String</span> <span class="n">number</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Example object graph using these classes:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Person</span> <span class="n">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Person</span><span class="o">();</span>
<span class="n">person</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Nate"</span><span class="o">);</span>
<span class="n">person</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">31</span><span class="o">);</span>
<span class="nc">ArrayList</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
<span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">PhoneNumber</span><span class="o">(</span><span class="s">"Home"</span><span class="o">,</span> <span class="s">"206-555-1234"</span><span class="o">));</span>
<span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">PhoneNumber</span><span class="o">(</span><span class="s">"Work"</span><span class="o">,</span> <span class="s">"425-555-4321"</span><span class="o">));</span>
<span class="n">person</span><span class="o">.</span><span class="na">setNumbers</span><span class="o">(</span><span class="n">numbers</span><span class="o">);</span>
</code></pre></div></div>

<p>The code to serialize this object graph:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">person</span><span class="o">));</span>

<span class="o">{</span><span class="nl">numbers:</span><span class="o">[{</span><span class="kd">class</span><span class="err">:</span><span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">PhoneNumber</span><span class="o">,</span><span class="nl">number:</span><span class="s">"206-555-1234"</span><span class="o">,</span><span class="nl">name:</span><span class="nc">Home</span><span class="o">},{</span><span class="kd">class</span><span class="err">:</span><span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">PhoneNumber</span><span class="o">,</span><span class="nl">number:</span><span class="s">"425-555-4321"</span><span class="o">,</span><span class="nl">name:</span><span class="nc">Work</span><span class="o">}],</span><span class="nl">name:</span><span class="nc">Nate</span><span class="o">,</span><span class="nl">age:</span><span class="mi">31</span><span class="o">}</span>
</code></pre></div></div>

<p>That is compact, but hardly legible. The <code class="language-plaintext highlighter-rouge">prettyPrint</code> method can be used:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">(</span><span class="n">person</span><span class="o">));</span>

<span class="o">{</span>
<span class="nl">numbers:</span> <span class="o">[</span>
	<span class="o">{</span>
		<span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">PhoneNumber</span><span class="o">,</span>
		<span class="nl">number:</span> <span class="s">"206-555-1234"</span><span class="o">,</span>
		<span class="nl">name:</span> <span class="nc">Home</span>
	<span class="o">},</span>
	<span class="o">{</span>
		<span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">PhoneNumber</span><span class="o">,</span>
		<span class="nl">number:</span> <span class="s">"425-555-4321"</span><span class="o">,</span>
		<span class="nl">name:</span> <span class="nc">Work</span>
	<span class="o">}</span>
<span class="o">],</span>
<span class="nl">name:</span> <span class="nc">Nate</span><span class="o">,</span>
<span class="nl">age:</span> <span class="mi">31</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Note that the class for the <code class="language-plaintext highlighter-rouge">PhoneNumber</code> objects in the <code class="language-plaintext highlighter-rouge">ArrayList numbers</code> field appears in the JSON. This is required to recreate the object graph from the JSON because <code class="language-plaintext highlighter-rouge">ArrayList</code> can hold any type of object. Class names are only output when they are required for deserialization. If the field was <code class="language-plaintext highlighter-rouge">ArrayList&lt;PhoneNumber&gt; numbers</code> then class names would only appear when an item in the list extends <code class="language-plaintext highlighter-rouge">PhoneNumber</code>. If you know the concrete type or aren’t using generics, you can avoid class names being written by telling the <code class="language-plaintext highlighter-rouge">Json</code> class the types:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">setElementType</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"numbers"</span><span class="o">,</span> <span class="nc">PhoneNumber</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">(</span><span class="n">person</span><span class="o">));</span>

<span class="o">{</span>
<span class="nl">numbers:</span> <span class="o">[</span>
	<span class="o">{</span>
		<span class="nl">number:</span> <span class="s">"206-555-1234"</span><span class="o">,</span>
		<span class="nl">name:</span> <span class="nc">Home</span>
	<span class="o">},</span>
	<span class="o">{</span>
		<span class="nl">number:</span> <span class="s">"425-555-4321"</span><span class="o">,</span>
		<span class="nl">name:</span> <span class="nc">Work</span>
	<span class="o">}</span>
<span class="o">],</span>
<span class="nl">name:</span> <span class="nc">Nate</span><span class="o">,</span>
<span class="nl">age:</span> <span class="mi">31</span>
<span class="o">}</span>
</code></pre></div></div>

<p>When writing the class cannot be avoided, an alias can be given:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">addClassTag</span><span class="o">(</span><span class="s">"phoneNumber"</span><span class="o">,</span> <span class="nc">PhoneNumber</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">(</span><span class="n">person</span><span class="o">));</span>

<span class="o">{</span>
<span class="nl">numbers:</span> <span class="o">[</span>
	<span class="o">{</span>
		<span class="kd">class</span><span class="err">:</span> <span class="nc">phoneNumber</span><span class="o">,</span>
		<span class="nl">number:</span> <span class="s">"206-555-1234"</span><span class="o">,</span>
		<span class="nl">name:</span> <span class="nc">Home</span>
	<span class="o">},</span>
	<span class="o">{</span>
		<span class="kd">class</span><span class="err">:</span> <span class="nc">phoneNumber</span><span class="o">,</span>
		<span class="nl">number:</span> <span class="s">"425-555-4321"</span><span class="o">,</span>
		<span class="nl">name:</span> <span class="nc">Work</span>
	<span class="o">}</span>
<span class="o">],</span>
<span class="nl">name:</span> <span class="nc">Nate</span><span class="o">,</span>
<span class="nl">age:</span> <span class="mi">31</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Json</code> class can write and read both JSON and a couple JSON-like formats. It supports “JavaScript”, where the object property names are only quoted when needed. It also supports a “minimal” format (the default), where both object property names and values are only quoted when needed.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">setOutputType</span><span class="o">(</span><span class="nc">OutputType</span><span class="o">.</span><span class="na">json</span><span class="o">);</span>
<span class="n">json</span><span class="o">.</span><span class="na">setElementType</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"numbers"</span><span class="o">,</span> <span class="nc">PhoneNumber</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">(</span><span class="n">person</span><span class="o">));</span>

<span class="o">{</span>
<span class="s">"numbers"</span><span class="o">:</span> <span class="o">[</span>
	<span class="o">{</span>
		<span class="s">"number"</span><span class="o">:</span> <span class="s">"206-555-1234"</span><span class="o">,</span>
		<span class="s">"name"</span><span class="o">:</span> <span class="s">"Home"</span>
	<span class="o">},</span>
	<span class="o">{</span>
		<span class="s">"number"</span><span class="o">:</span> <span class="s">"425-555-4321"</span><span class="o">,</span>
		<span class="s">"name"</span><span class="o">:</span> <span class="s">"Work"</span>
	<span class="o">}</span>
<span class="o">],</span>
<span class="s">"name"</span><span class="o">:</span> <span class="s">"Nate"</span><span class="o">,</span>
<span class="s">"age"</span><span class="o">:</span> <span class="mi">31</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Note: By default, the Json class will not write those fields which have values that are identical to a newly constructed instance. If you wish to disable this behavior and include all fields, call <code class="language-plaintext highlighter-rouge">json.setUsePrototypes(false);</code>.</p>

<h2 id="reading-object-graphs">
<a id="reading-object-graphs"></a>Reading Object Graphs</h2>

<p>The <code class="language-plaintext highlighter-rouge">Json</code> class uses reflection to automatically deserialize objects from JSON. Here is how to deserialize the JSON from the previous examples:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
<span class="nc">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">text</span><span class="o">);</span>
</code></pre></div></div>

<p>The type passed to <code class="language-plaintext highlighter-rouge">fromJson</code> is the type of the root of the object graph. From this, the <code class="language-plaintext highlighter-rouge">Json</code> class determines the types of all the fields and all other objects encountered, recursively. The “knownType” and “elementType” of the root can be passed to <code class="language-plaintext highlighter-rouge">toJson</code>. This is useful if the type of the root object is not known:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">setOutputType</span><span class="o">(</span><span class="nc">OutputType</span><span class="o">.</span><span class="na">minimal</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">person</span><span class="o">,</span> <span class="nc">Object</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">json</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">(</span><span class="n">text</span><span class="o">));</span>
<span class="nc">Object</span> <span class="n">person2</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="nc">Object</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">text</span><span class="o">);</span>

<span class="o">{</span>
<span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">Person</span><span class="o">,</span>
<span class="nl">numbers:</span> <span class="o">[</span>
	<span class="o">{</span>
		<span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">PhoneNumber</span><span class="o">,</span>
		<span class="nl">number:</span> <span class="s">"206-555-1234"</span><span class="o">,</span>
		<span class="nl">name:</span> <span class="nc">Home</span>
	<span class="o">},</span>
	<span class="o">{</span>
		<span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">PhoneNumber</span><span class="o">,</span>
		<span class="nl">number:</span> <span class="s">"425-555-4321"</span><span class="o">,</span>
		<span class="nl">name:</span> <span class="nc">Work</span>
	<span class="o">}</span>
<span class="o">],</span>
<span class="nl">name:</span> <span class="nc">Nate</span><span class="o">,</span>
<span class="nl">age:</span> <span class="mi">31</span>
<span class="o">}</span>
</code></pre></div></div>

<p>To read the JSON as a DOM of maps, arrays, and values, the <code class="language-plaintext highlighter-rouge">JsonReader</code> class can be used:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">person</span><span class="o">,</span> <span class="nc">Object</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="nc">JsonValue</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JsonReader</span><span class="o">().</span><span class="na">parse</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">JsonValue</code> describes a JSON object, array, string, float, long, boolean, or null.</p>

<h2 id="customizing-serialization">
<a id="customizing-serialization"></a>Customizing Serialization</h2>

<p>Usually automatic serialization is sufficient, however there are some classes where automatic serialization is not possible or custom serialization is desired. Serialization may be customized by having the class implement the <code class="language-plaintext highlighter-rouge">Json.Serializable</code> interface or by registering a <code class="language-plaintext highlighter-rouge">Json.Serializer</code> with the <code class="language-plaintext highlighter-rouge">Json</code> instance.</p>

<p>This example uses <code class="language-plaintext highlighter-rouge">Json.Serializable</code> to write a phone number as an object with a single field:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">static</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">PhoneNumber</span> <span class="kd">implements</span> <span class="nc">Json</span><span class="o">.</span><span class="na">Serializable</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
   <span class="kd">private</span> <span class="nc">String</span> <span class="n">number</span><span class="o">;</span>

   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span> <span class="o">(</span><span class="nc">Json</span> <span class="n">json</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">json</span><span class="o">.</span><span class="na">writeValue</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">number</span><span class="o">);</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">read</span> <span class="o">(</span><span class="nc">Json</span> <span class="n">json</span><span class="o">,</span> <span class="nc">JsonValue</span> <span class="n">jsonMap</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">name</span> <span class="o">=</span> <span class="n">jsonMap</span><span class="o">.</span><span class="na">child</span><span class="o">().</span><span class="na">name</span><span class="o">();</span>
      <span class="n">number</span> <span class="o">=</span> <span class="n">jsonMap</span><span class="o">.</span><span class="na">child</span><span class="o">().</span><span class="na">asString</span><span class="o">();</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">setElementType</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"numbers"</span><span class="o">,</span> <span class="nc">PhoneNumber</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
<span class="nc">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">text</span><span class="o">);</span>

<span class="o">{</span>
<span class="nl">numbers:</span> <span class="o">[</span>
	<span class="o">{</span>
		<span class="nl">Home:</span> <span class="s">"206-555-1234"</span>
	<span class="o">},</span>
	<span class="o">{</span>
		<span class="nl">Work:</span> <span class="s">"425-555-4321"</span>
	<span class="o">}</span>
<span class="o">],</span>
<span class="nl">name:</span> <span class="nc">Nate</span><span class="o">,</span>
<span class="nl">age:</span> <span class="mi">31</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The class implementing <code class="language-plaintext highlighter-rouge">Json.Serializable</code> must have a zero argument constructor because object construction is done for you. In the <code class="language-plaintext highlighter-rouge">write</code> method, the surrounding JSON object has already been written. The <code class="language-plaintext highlighter-rouge">read</code> method always receives a <code class="language-plaintext highlighter-rouge">JsonValue</code> that represents that JSON object.</p>

<p><code class="language-plaintext highlighter-rouge">Json.Serializer</code> provides more control over what is output, requiring <code class="language-plaintext highlighter-rouge">writeObjectStart</code> and <code class="language-plaintext highlighter-rouge">writeObjectEnd</code> to be called if you require a JSON object like <code class="language-plaintext highlighter-rouge">Json.Serializable</code>. Alternatively, a JSON array or a simple value (string, int, boolean) could be output instead of an object. <code class="language-plaintext highlighter-rouge">Json.Serializer</code> also allows the object creation to be customized:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Json</span> <span class="n">json</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">setSerializer</span><span class="o">(</span><span class="nc">PhoneNumber</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Json</span><span class="o">.</span><span class="na">Serializer</span><span class="o">&lt;</span><span class="nc">PhoneNumber</span><span class="o">&gt;()</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span> <span class="o">(</span><span class="nc">Json</span> <span class="n">json</span><span class="o">,</span> <span class="nc">PhoneNumber</span> <span class="n">number</span><span class="o">,</span> <span class="nc">Class</span> <span class="n">knownType</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">json</span><span class="o">.</span><span class="na">writeObjectStart</span><span class="o">();</span>
      <span class="n">json</span><span class="o">.</span><span class="na">writeValue</span><span class="o">(</span><span class="n">number</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">number</span><span class="o">.</span><span class="na">number</span><span class="o">);</span>
      <span class="n">json</span><span class="o">.</span><span class="na">writeObjectEnd</span><span class="o">();</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="nc">PhoneNumber</span> <span class="nf">read</span> <span class="o">(</span><span class="nc">Json</span> <span class="n">json</span><span class="o">,</span> <span class="nc">JsonValue</span> <span class="n">jsonData</span><span class="o">,</span> <span class="nc">Class</span> <span class="n">type</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">PhoneNumber</span> <span class="n">number</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PhoneNumber</span><span class="o">();</span>
      <span class="n">number</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">jsonData</span><span class="o">.</span><span class="na">child</span><span class="o">().</span><span class="na">name</span><span class="o">());</span>
      <span class="n">number</span><span class="o">.</span><span class="na">setNumber</span><span class="o">(</span><span class="n">jsonData</span><span class="o">.</span><span class="na">child</span><span class="o">().</span><span class="na">asString</span><span class="o">());</span>
      <span class="k">return</span> <span class="n">number</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">});</span>
<span class="n">json</span><span class="o">.</span><span class="na">setElementType</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"numbers"</span><span class="o">,</span> <span class="nc">PhoneNumber</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">(</span><span class="n">person</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">text</span><span class="o">);</span>
<span class="nc">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="nc">Person</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">text</span><span class="o">);</span>
</code></pre></div></div>

<h2 id="serialization-methods">
<a id="serialization-methods"></a>Serialization Methods</h2>

<p><code class="language-plaintext highlighter-rouge">Json</code> has many methods to read and write data to the JSON. Write methods without a name string are used to write a value that is not a JSON object field (eg, a string or an object in a JSON array). Write methods that take a name string are used to write a field name and value for a JSON object.</p>

<p><code class="language-plaintext highlighter-rouge">writeObjectStart</code> is used to start writing a JSON object, then values can be written using the write methods that take a name string. When the object is finished, <code class="language-plaintext highlighter-rouge">writeObjectEnd</code> must be called:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">json</span><span class="o">.</span><span class="na">writeObjectStart</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeValue</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"value"</span><span class="o">);</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeObjectEnd</span><span class="o">();</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">writeObjectStart</code> methods that take an actualType and a knownType will write a class field to the JSON if the types differ. This enables the actual type to be known during deserialization. For example, the known type may be java.util.Map but the actual type is java.util.LinkedHashMap (which extends HashMap), so deserialization needs to know the actual type to create.</p>

<p>Writing arrays works in a similar manner, except the values should be written using the write methods that do not take a name string:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">json</span><span class="o">.</span><span class="na">writeArrayStart</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeValue</span><span class="o">(</span><span class="s">"value1"</span><span class="o">);</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeValue</span><span class="o">(</span><span class="s">"value2"</span><span class="o">);</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeArrayEnd</span><span class="o">();</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Json</code> class can automatically write Java object fields and values. <code class="language-plaintext highlighter-rouge">writeFields</code> writes all fields and values for the specified Java object to the current JSON object:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">json</span><span class="o">.</span><span class="na">writeObjectStart</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeFields</span><span class="o">(</span><span class="n">someObject</span><span class="o">);</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeObjectEnd</span><span class="o">();</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">writeField</code> method writes the value for a single Java object field:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">json</span><span class="o">.</span><span class="na">writeObjectStart</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeField</span><span class="o">(</span><span class="n">someObject</span><span class="o">,</span> <span class="s">"javaFieldName"</span><span class="o">,</span> <span class="s">"jsonFieldName"</span><span class="o">);</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeObjectEnd</span><span class="o">();</span>
</code></pre></div></div>

<p>Many of the write methods take an “element type” parameter. This is used to specify the known type of objects in a collection. For example, for a list:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ArrayList</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">someObject1</span><span class="o">);</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">someObject2</span><span class="o">);</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">someObject3</span><span class="o">);</span>
<span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">someOtherObject</span><span class="o">);</span>
<span class="o">...</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeObjectStart</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeValue</span><span class="o">(</span><span class="s">"items"</span><span class="o">,</span> <span class="n">list</span><span class="o">);</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeObjectEnd</span><span class="o">();</span>

<span class="o">{</span>
	<span class="nl">items:</span> <span class="o">[</span>
		<span class="o">{</span> <span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">SomeObject</span><span class="o">,</span> <span class="nl">value:</span> <span class="mi">1</span> <span class="o">},</span>
		<span class="o">{</span> <span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">SomeObject</span><span class="o">,</span> <span class="nl">value:</span> <span class="mi">2</span> <span class="o">},</span>
		<span class="o">{</span> <span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">SomeObject</span><span class="o">,</span> <span class="nl">value:</span> <span class="mi">3</span> <span class="o">},</span>
		<span class="o">{</span> <span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">SomeOtherObject</span><span class="o">,</span> <span class="nl">value:</span> <span class="n">four</span> <span class="o">}</span>
	<span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Here the known type of objects in the list is Object, so each object in the JSON for “items” has a class field that specifies Integer or String. By specifying the element type, Integer is used as the known type so only the last entry in the JSON for “items” has a class field:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">json</span><span class="o">.</span><span class="na">writeObjectStart</span><span class="o">();</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeValue</span><span class="o">(</span><span class="s">"items"</span><span class="o">,</span> <span class="n">list</span><span class="o">,</span> <span class="nc">ArrayList</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">json</span><span class="o">.</span><span class="na">writeObjectEnd</span><span class="o">();</span>

<span class="o">{</span>
	<span class="nl">items:</span> <span class="o">[</span>
		<span class="o">{</span> <span class="nl">value:</span> <span class="mi">1</span> <span class="o">},</span>
		<span class="o">{</span> <span class="nl">value:</span> <span class="mi">2</span> <span class="o">},</span>
		<span class="o">{</span> <span class="nl">value:</span> <span class="mi">3</span> <span class="o">},</span>
		<span class="o">{</span> <span class="kd">class</span><span class="err">:</span> <span class="nc">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">SomeOtherObject</span><span class="o">,</span> <span class="nl">value:</span> <span class="n">four</span> <span class="o">}</span>
	<span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>For maps, the element type is used for the values. The keys for maps are always strings, a limitation of how object fields are described using JSON.</p>

<p>Note that the <code class="language-plaintext highlighter-rouge">Json</code> class uses generics on Java field declarations to determine the element type where possible.</p>

<h2 id="supported-classes">
<a id="supported-classes"></a>Supported Classes</h2>

<p>Note that when using GWT, not all classes are serializable. <code class="language-plaintext highlighter-rouge">Json</code> supports the following:</p>
<ul>
  <li>POJOs</li>
  <li>OrderedMap (but not ArrayMap)</li>
  <li>Array</li>
  <li>String</li>
  <li>Float</li>
  <li>Boolean</li>
</ul>

<p>Make sure to provide your own de/serializers or mark objects you don’t intend to serialize with the ‘transient’ keyword.</p>

<h2 id="manual-and-event-based-parsing">
<a id="event-based-parsing"></a>Manual and Event Based Parsing</h2>

<p>The <code class="language-plaintext highlighter-rouge">JsonReader</code> class reads JSON and has protected methods that are called as JSON objects, arrays, strings, floats, longs, and booleans are encountered. By default, these methods build a DOM out of <code class="language-plaintext highlighter-rouge">JsonValue</code> objects. These methods can be overridden to do your own event based JSON handling.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// read something </span>
<span class="nc">JsonValue</span> <span class="n">fromJson</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JsonReader</span><span class="o">().</span><span class="na">parse</span><span class="o">(</span><span class="n">jsonAsString</span><span class="o">);</span>
<span class="n">nickName</span> <span class="o">=</span> <span class="n">fromJson</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"nickName"</span><span class="o">);</span>
<span class="c1">// ...</span>

<span class="c1">// write something</span>
<span class="nc">JsonValue</span> <span class="n">toJson</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JsonValue</span><span class="o">(</span><span class="nc">JsonValue</span><span class="o">.</span><span class="na">ValueType</span><span class="o">.</span><span class="na">object</span><span class="o">);</span>
<span class="n">toJson</span><span class="o">.</span><span class="na">addChild</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">JsonValue</span><span class="o">(</span><span class="s">"some name"</span><span class="o">);</span>
<span class="n">toJson</span><span class="o">.</span><span class="na">addChild</span><span class="o">(</span><span class="s">"age"</span><span class="o">,</span> <span class="mi">12</span><span class="o">);</span>
<span class="c1">// ...</span>
<span class="n">toJson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="nc">JsonWriter</span><span class="o">.</span><span class="na">OutputType</span><span class="o">.</span><span class="na">json</span><span class="o">);</span>
</code></pre></div></div>



        <div style="border-color: #d0d7de;border-style: solid;border-width: 1px;border-radius: 6px;box-shadow: 0 1px 0 rgba(27,31,36,0.04) !important;background-color: #f6f8fa !important;padding: 8px 16px;margin-bottom: 20px;margin-top: 15px;">
          <p style="font-size: 13px;margin-bottom: 0px !important;">
            <b>© 2021 libGDX</b> • This wiki is a community effort. If you find information out of date or want to add some more in-depth explanations, you are very welcome to do the necessary changes. Before contributing, please take a look at our <a href="/wiki/wiki-style-guide">Wiki Style Guide</a>.
            <br>
            <br>
            <b>If you need additional help, check out our community on <a href="https://libgdx.com/community/discord/" rel="external">Discord<span class="ico-ext"><i class="fas fa-external-link-alt"></i></span></a>!</b>
          </p>
        </div>
      </section>
    </div>

  </article>
</div>


    </div>

    
  <script src="/pages/crykn/assets/js/main.min.js"></script>










  </body>
</html>
